@import nib

@import "ui/styl/reset"
@import "ui/styl/box-sizing-border-box-all"
@import "ui/styl/body-typography"
@import "ui/styl/responsive-helpers"
@import "ui/styl/subtle-text"
@import "ui/styl/hr"
@import "ui/styl/h1-h6"
@import "ui/styl/links-brand-colored"
@import "ui/styl/more-links-and-buttons"
@import "ui/styl/loading-dots"
@import "ui/styl/box"
@import "ui/styl/inline-code"
@import "ui/styl/colors"
@import "ui/styl/fonts"
@import "ui/styl/font-smoothing"

//@import "ui/styl/code-colors"
codeBlue = #3b447f
codePurple = #633573
codeGold = #8b6253
codeTeal = #246a7b
codeRed = #b34651
codePink = #ae2f7d
codeLightPink = #bcb2c0

navigationWidth = 15em
smallNavigationWidth = 13em
codeOverlayWidth = 25em
minimumEditorWidth = 25em
editorWithCodeOverlayMinWidthQuery = "(min-width: " + (navigationWidth + codeOverlayWidth + minimumEditorWidth) + ")"
editorWithCodeOverlayMaxWidthQuery = "(max-width: " + (navigationWidth + codeOverlayWidth + minimumEditorWidth - .0625em) + ")"

html
  antialiasedFonts()
  font-size 16px
  background #eee

.page-loader
  position fixed
  top 0
  right 0
  bottom 0
  left navigationWidth
  background #eee
  z-index 999
  transition opacity .15s ease
  text-align center
  line-height 100vh

  @media editorWithCodeOverlayMaxWidthQuery
    left smallNavigationWidth

  .page-loader-inner
    width 20em
    height 2em
    max-width 100%
    margin auto
    text-align center

  .loading-dots
    margin-left -1.5em

  html.page-loaded &
    pointer-events none
    opacity 0

    *
      animation-play-state paused

.navigation
  position fixed
  top 0
  left 0
  bottom 0
  width navigationWidth
  padding-top 2.8em
  background-color #111
  background-image linear-gradient(#111, #1f0514)
  z-index 5

  @media editorWithCodeOverlayMaxWidthQuery
    width smallNavigationWidth

ul.side-navigation-list
  list-style none
  padding 0
  margin 0
  line-height 1.5em
  font-size 1.1875em

  > li

    &.separator
      height .0625em
      margin .375em 0

      &.large
        height 2.5em

    > a
      display block
      position relative
      cursor pointer
      padding 0.45em 2rem .45em 2rem

      &, &:hover
        color rgba(#fff, .8)
        text-decoration none

      &:hover
        background rgba(#fff, .1)

      &.active

        &, &:hover
          background #fff
          color #000

.json-is-logo
  color #fff
  text-decoration none
  font-size 2em
  letter-spacing -.04em
  font-weight bold
  display inline-block
  line-height .8

  .navigation &
    margin-bottom 1em
    padding-left 2rem

.page
  position relative
  padding-left navigationWidth
  background #eee

  @media editorWithCodeOverlayMaxWidthQuery
    padding-left smallNavigationWidth

.code-editor
  position relative
  width 100%
  z-index 10

  #editor
    font-size 16px // Note: this number is crucial to the JS
    line-height 21px // Note: this number is crucial to the JS
    height 100%
    width 100%

    @media editorWithCodeOverlayMinWidthQuery
      max-width "calc(100% - %s)" % codeOverlayWidth

  .code-property-path
    position fixed
    bottom 0
    right 0
    background #fff
    padding 5px
    color subtle-text
    font-size .8em

  .code-overlay
    position absolute
    z-index 5
    top 0
    right 0
    width 50%
    width 400px
    padding 21px
    overflow hidden
    line-height 1.3em
    background #fff
    opacity 0
    pointer-events none

    @media editorWithCodeOverlayMinWidthQuery
      opacity 1
      pointer-events all

    &:empty
      display none !important

    h4, h5
      font-weight bold

    h4
      font-size 1.2em
      margin-bottom 0.8333em

    h5
      font-size 1em

    pre
      line-height 1.1em
      font-size .85em
      background-color #eee
      padding 1em
      color #222

    > *:first-child
      margin-top 0

    > *:last-child
      margin-bottom 0

// Ace editor styles

html .ace-tm
  color #000

  &, .ace_gutter
    background #eee

  .ace_gutter
    color #a5a5a5

    .ace_fold-widget
      transition opacity .2s ease

    &:not(:hover) .ace_fold-widget
      opacity .5

  .ace_gutter-active-line, .ace_marker-layer .ace_active-line
    background #fff

  .ace_cursor
    color #000

  .ace_marker-layer

    .ace_selection
      background #e0dae0

    .ace_step
      background rgb(102, 82, 0)

    .ace_bracket
      margin -1px 0 0 -1px
      border 1px solid #000

    .ace_selected-word
      background #fafaff
      border 1px solid #000

  .ace_fold
    background-color darken(codePink, 20%)
    border-color rgba(#000, .4)

  .ace_string
    color codeBlue

  .ace_indent-guide
    background url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC") right repeat-y
    opacity .2

  .ace_constant.ace_numeric
    color #5100db
    color codeBlue

  .ace_entity.ace_name.ace_function, .ace_entity.ace_other, .ace_entity.ace_other.ace_attribute-name, .ace_variable
    color codePink

// TODO

// .share
//   margin 1em auto
//   font-size 0
//   text-align center

//   iframe
//     display inline-block
//     vertical-align middle
//     background #eee
//     border-radius 5px
//     margin-left auto
//     margin-right auto
//     border 0
//     height 2.3rem

//     &:hover
//       opacity 1

//     &.github
//       width 12rem
//       margin-right 1rem

//       @media (max-width 36em)
//         width 100%
//         margin-right 0
//         margin-bottom .5rem

//     &.twitter
//       width 8.5rem

//       @media (max-width 36em)
//         width 100%
